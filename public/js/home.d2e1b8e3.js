(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{5319:function(e,t,i){"use strict";var r=i("d784"),n=i("825a"),a=i("7b0b"),s=i("50c4"),o=i("a691"),c=i("1d80"),d=i("8aa5"),l=i("14c3"),u=Math.max,p=Math.min,v=Math.floor,f=/\$([$&'`]|\d\d?|<[^>]*>)/g,h=/\$([$&'`]|\d\d?)/g,m=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,i,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,y=r.REPLACE_KEEPS_$0,g=b?"$":"$0";return[function(i,r){var n=c(this),a=void 0==i?void 0:i[e];return void 0!==a?a.call(i,n,r):t.call(String(n),i,r)},function(e,r){if(!b&&y||"string"===typeof r&&-1===r.indexOf(g)){var a=i(t,e,this,r);if(a.done)return a.value}var c=n(e),v=String(this),f="function"===typeof r;f||(r=String(r));var h=c.global;if(h){var _=c.unicode;c.lastIndex=0}var k=[];while(1){var S=l(c,v);if(null===S)break;if(k.push(S),!h)break;var x=String(S[0]);""===x&&(c.lastIndex=d(v,s(c.lastIndex),_))}for(var E="",C=0,R=0;R<k.length;R++){S=k[R];for(var I=String(S[0]),U=u(p(o(S.index),v.length),0),L=[],P=1;P<S.length;P++)L.push(m(S[P]));var O=S.groups;if(f){var M=[I].concat(L,U,v);void 0!==O&&M.push(O);var T=String(r.apply(void 0,M))}else T=w(I,v,U,L,O,r);U>=C&&(E+=v.slice(C,U)+T,C=U+I.length)}return E+v.slice(C)}];function w(e,i,r,n,s,o){var c=r+e.length,d=n.length,l=h;return void 0!==s&&(s=a(s),l=f),t.call(o,l,(function(t,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return i.slice(0,r);case"'":return i.slice(c);case"<":o=s[a.slice(1,-1)];break;default:var l=+a;if(0===l)return t;if(l>d){var u=v(l/10);return 0===u?t:u<=d?void 0===n[u-1]?a.charAt(1):n[u-1]+a.charAt(1):t}o=n[l-1]}return void 0===o?"":o}))}}))},"5ced":function(e,t,i){},bb51:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("div",{staticClass:"login-7 tab-box"},[i("div",{staticClass:"container-fluid"},[i("div",{staticClass:"row"},[e.address?i("div",{},[e.success?e._e():i("div",{staticClass:"login-inner-form"},[i("div",{staticClass:"details"},[i("h1",[e._v("Link a Digital Identity")]),i("br"),e._v("to "+e._s(e.address)),i("br"),i("br"),i("div",{staticClass:"columns",class:{isGithub:e.isGithub,isGoogle:e.isGoogle,isTwitter:e.isTwitter,isLinkedin:e.isLinkedin,isEmail:e.isEmail,isPhone:e.isPhone}},e._l(e.providers,(function(t){return i("div",{key:t,staticClass:"column",on:{click:function(i){return e.selectProvider(t)}}},[i("div",{class:"card is-"+t,staticStyle:{cursor:"pointer"}},[i("div",{staticClass:"card-content"},[i("img",{attrs:{src:"/"+t+".png",width:"100%"}})]),i("footer",{staticClass:"card-footer"},[i("p",{staticClass:"card-footer-item"},[i("span",[e._v(" "+e._s(t.toUpperCase())+" ")])])])])])})),0),i("form",{attrs:{id:"verificationForm",action:e.backendURL+"/auth/"+e.provider,method:"GET"}},[i("br"),"email"===e.provider&&!1===e.showEmailVerification?i("div",{staticClass:"form-group"},[e._v(" Insert your e-mail to continue:"),i("br"),i("br"),i("b-input",{attrs:{type:"email",placeholder:"Insert E-Mail"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),i("br")],1):e._e(),"phone"===e.provider&&!1===e.showSmsVerification?i("div",{staticClass:"form-group"},[e._v(" Insert your phone number to continue:"),i("br"),i("br"),i("b-input",{attrs:{placeholder:"Insert Phone number"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),i("br"),i("small",[e._v("Insert the country prefix before (ex +393331122333)")]),i("br"),i("br")],1):e._e(),"phone"===e.provider&&!0===e.showSmsVerification?i("div",{staticClass:"form-group"},[e._v(" Insert the OTP received by SMS:"),i("br"),i("br"),i("b-input",{attrs:{placeholder:"Insert code"},model:{value:e.smsverification,callback:function(t){e.smsverification=t},expression:"smsverification"}}),i("br")],1):e._e(),"email"===e.provider&&!0===e.showEmailVerification?i("div",{staticClass:"form-group"},[e._v(" Insert the OTP received by E-Mail:"),i("br"),i("br"),i("b-input",{attrs:{placeholder:"Insert code"},model:{value:e.emailverification,callback:function(t){e.emailverification=t},expression:"emailverification"}}),i("br")],1):e._e(),i("div",{staticClass:"form-group row"},[i("div",{staticClass:"col-12"},["phone"!==e.provider&&"email"!==e.provider?i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.submitVerification()}}},[e._v("Start verification with "+e._s(e.provider.toUpperCase()))]):e._e(),"phone"===e.provider&&!1===e.showSmsVerification?i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.sendSMS()}}},[e._v("Send verification SMS")]):e._e(),"phone"===e.provider&&!0===e.showSmsVerification?i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.verifySMS()}}},[e._v("Verify SMS")]):e._e(),"email"===e.provider&&!1===e.showEmailVerification?i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.sendEmail()}}},[e._v("Send verification e-mail")]):e._e(),"email"===e.provider&&!0===e.showEmailVerification?i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.verifyEMail()}}},[e._v("Verify e-mail")]):e._e(),i("br")],1)])])])]),e.updated?e._e():i("div",[e.success?i("div",{staticClass:"login-inner-form"},[i("img",{attrs:{src:"/success.png",width:"200"}}),i("br"),i("br"),e._v("You've successfully verified your "),i("b",[e._v(e._s(e.success.toUpperCase()))]),e._v(" account:"),i("br"),i("br"),i("b",[e._v("Username:")]),e._v(" "+e._s(e.payload.identity.username)),i("br"),void 0!==e.payload.identity.id?i("span",[i("b",[e._v("ID:")]),e._v(" "+e._s(e.payload.identity.id)),i("br"),i("br")]):e._e(),i("br"),e.isWriting?e._e():i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.writeIdentity()}}},[e._v("Write identity's signature into the Blockchain")]),e.isWriting?i("div",[e._v(" "+e._s(e.workingmessage)+" ")]):e._e()],1):e._e()]),e.updated?i("div",[i("div",{staticClass:"login-inner-form text-center"},[i("h4",[e._v("Process completed!")]),e._v(" Now is time to download your updated .sid file and sync your dApps and your extension!"),i("br"),e._v(" Please note, no one keeps your identity payload, only you can share it, these informations are not stored in any server."),i("br"),i("br"),i("a",{staticStyle:{display:"none"},attrs:{id:"downloadsid"}}),i("b-button",{attrs:{type:"is-primary"},on:{click:function(t){return e.downloadSidFile()}}},[e._v("Download .sid file")]),i("br"),i("br"),i("a",{attrs:{href:e.shareURL,target:"_blank"}},[i("b-button",{attrs:{type:"is-success"}},[e._v("SHARE IDENTITY")])],1),i("br"),i("br"),i("a",{attrs:{href:"/"}},[e._v("Go back")])],1)]):e._e()]):e._e()])])])])},n=[],a=(i("c975"),i("d81d"),i("ace4"),i("d3b7"),i("ac1f"),i("25f0"),i("3ca3"),i("466d"),i("5319"),i("1276"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("ddb0"),i("2b3d"),i("96cf"),i("1da1")),s=i("7d47")(),o=s.encode,c=s.decode,d=i("07c9"),l=i("bc3a"),u={name:"Home",data:function(){return{scrypta:new d(!0),backendURL:"",address:"",file:"",isWriting:!1,showSmsVerification:!1,showEmailVerification:!1,smsverification:"",emailverification:"",unlockPwd:"",showQRCanvas:!1,isGithub:!0,isGoogle:!1,isTwitter:!1,isLinkedin:!1,isEmail:!1,isPhone:!1,provider:"github",email:"",providers:[],phone:"",workingmessage:"",success:"",encrypted_wallet:"",public_qrcode:"",sync_qrcode:"",decrypted_wallet:"",linked:"",updated:"",axios:l,shareURL:"",payload:{identity:{username:"",id:""}}}},mounted:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i,r,n,a,s,o,c,d,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=document.URL,r=e,n=window.location.href,a=n.split("?"),r.backendURL=a[0].replace(":8080/",":3000/").replace("/#/","").replace(":3000/",":3000"),t.next=7,r.axios.get(r.backendURL+"/providers");case 7:return s=t.sent,o=s.data.providers,r.providers=o,t.next=12,e.checkUser();case 12:c=t.sent,!0===c&&-1!==i.indexOf("?")&&(d=i.split("?"),void 0!==d[1]&&(l=d[1].split("="),void 0!==l[1]&&"success"===l[1].replace("#","").replace("#/","").replace("/","")&&(r.success=l[0],r.axios.post(r.backendURL+"/auth/"+l[0]+"/session").then((function(e){void 0!==e.data.identity?r.payload=e.data:window.location="/"})))));case 14:case"end":return t.stop()}}),t)})))()},methods:{selectProvider:function(e){var t=this;t.provider=e,t.isGithub=!1,t.isGoogle=!1,t.isPhone=!1,t.isEmail=!1,t.isLinkedin=!1,t.isTwitter=!1,"github"===e&&(t.isGithub=!0),"google"===e&&(t.isGoogle=!0),"twitter"===e&&(t.isTwitter=!0),"linkedin"===e&&(t.isLinkedin=!0),"email"===e&&(t.isEmail=!0),"phone"===e&&(t.isPhone=!0)},sendEmail:function(){var e=this;""!==e.email?e.axios.post(e.backendURL+"/email/send",{email:e.email}).then((function(t){!0===t.data.success&&(e.showEmailVerification=!0)})):alert("Write email first!")},verifyEMail:function(){var e=this;void 0!==e.emailverification?e.axios.post(e.backendURL+"/email/verify",{email:e.email,code:e.emailverification}).then((function(t){200===t.data.status?(e.success="email",e.payload=t.data.success):alert("Code is invalid!")})):alert("Write code first!")},sendSMS:function(){var e=this;""!==e.phone?e.axios.post(e.backendURL+"/phone/send",{number:e.phone}).then((function(t){!0===t.data.success&&(e.showSmsVerification=!0)})):alert("Write phone first!")},verifySMS:function(){var e=this;void 0!==e.smsverification?e.axios.post(e.backendURL+"/phone/verify",{number:e.phone,code:e.smsverification}).then((function(t){200===t.data.status?(e.success="phone",e.payload=t.data.success):alert("Code is invalid!")})):alert("Write code first!")},submitVerification:function(){var e=this;""!==e.provider&&document.getElementById("verificationForm").submit()},checkUser:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.scrypta.returnDefaultIdentity();case 2:if(i=t.sent,!i){t.next=8;break}return r=i.split(":"),e.address=r[0],e.encrypted_wallet=i,t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})))()},downloadSidFile:function(){var e=document.getElementById("downloadsid"),t=new Blob([this.encrypted_wallet],{type:"sid"});e.href=URL.createObjectURL(t),e.download=this.address+".sid";var i=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});e.dispatchEvent(i)},writeIdentity:function(){var e=this;e.$buefy.dialog.prompt({message:"Enter wallet password",inputAttrs:{type:"password"},trapFocus:!0,onConfirm:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(i){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.scrypta.readKey(i,e.encrypted_wallet);case 2:r=t.sent,!1!==r?(e.isWriting=!0,n=r.prv,e.workingmessage="Signing identity with private key...",s={identity:e.payload.identity,fingerprint:e.payload.fingerprint},e.scrypta.signMessage(n,JSON.stringify(s)).then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var a,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(void 0===r.identity&&(r.identity={}),r.identity[e.success]={},r.identity[e.success]=s,r.identity[e.success]!==s){t.next=15;break}return t.next=6,e.scrypta.buildWallet(i,e.address,r,!0);case 6:return t.next=8,e.scrypta.returnIdentity(e.address);case 8:return a=t.sent,t.next=11,e.scrypta.readKey(i,a.wallet);case 11:o=t.sent,o.identity[e.success].fingerprint===s.fingerprint?(e.encrypted_wallet=a.wallet,localStorage.setItem("SID",a.wallet),c={signature:n.signature,gateway:e.payload.gateway,fingerprint:e.payload.fingerprint},e.workingmessage="Uploading data to the blockchain...",e.scrypta.write(e.encrypted_wallet,i,JSON.stringify(c),"",e.success.toUpperCase(),"I://").then((function(t){void 0!==t.uuid?(e.isWriting=!1,e.workingmessage="Data written correctly.",e.payload="",e.decrypted_wallet="WALLET LOCKED",e.updated=e.encrypted_wallet,setTimeout((function(){r.identity.address=e.address,r.identity.key=r.key;var t=e.encodeMsgPack(r.identity);e.shareURL="https://me.scrypta.id/#/share/"+t}),30)):(alert("There's an error in the upload, please retry!"),e.isWriting=!1)})).catch((function(){alert("There's an error in the upload, please retry!"),e.isWriting=!1}))):alert("Something goes wrong, retry please!"),t.next=16;break;case 15:alert("Something goes wrong, retry please!");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())):e.$buefy.toast.open({message:"Wrong password!",type:"is-danger"});case 4:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()})},encodeMsgPack:function(e){var t=o(e).toString("hex");return t},decodeMsgPack:function(e){var t=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))},i=t(e),r=c(i);return r}}},p=u,v=(i("cccb"),i("2877")),f=Object(v["a"])(p,r,n,!1,null,null,null);t["default"]=f.exports},c975:function(e,t,i){"use strict";var r=i("23e7"),n=i("4d64").indexOf,a=i("a640"),s=i("ae40"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,d=a("indexOf"),l=s("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!d||!l},{indexOf:function(e){return c?o.apply(this,arguments)||0:n(this,e,arguments.length>1?arguments[1]:void 0)}})},cccb:function(e,t,i){"use strict";var r=i("5ced"),n=i.n(r);n.a}}]);
//# sourceMappingURL=home.d2e1b8e3.js.map